% THIS IS SIGPROC-SP.TEX - VERSION 3.1
% WORKS WITH V3.2SP OF ACM_PROC_ARTICLE-SP.CLS
% APRIL 2009
%
% I Choose You!
%
% Authors: 
%
% based upon LaTeX2.09 Guidelines, 9 June 1996
%
% Revisions: 6 May 2015
%	


\documentclass{acm_proc_article-sp}

\begin{document}

\title{I Choose You!}
\subtitle{Predicting the Outcome of Competitive Pokemon Battles}

\numberofauthors{2}

\author{
\alignauthor
1\\
       \affaddr{Rutgers University}\\
       \affaddr{Department of Computer Science}\\
       \affaddr{Piscataway, NJ  08854}\\
       \email{@}
\alignauthor
Robert Williams\\
       \affaddr{Rutgers University}\\
       \affaddr{Department of Computer Science}\\
       \affaddr{Piscataway, NJ  08854}\\
       \email{@}
}

\maketitle
\begin{abstract}
Thousands of people play Pokemon competitively throughout the world. Through trial and error, some are able build teams that win in the current metagame\footnote{The "metagame," or "meta," refers to a set of general unwritten rules that most players accept as the norm when playing any online game. As new game features and player innovations are introduced, the metagame is said to "evolve" to accommodate those changes.} and rise to the top. However, the sheer amount of time and effort needed to reach this point is daunting to novice Trainers. Thus, we looked at over 300 Pokemon battles to get an idea of what makes a Pokemon team successful today. After careful analysis of the data, it is clear that the current meta does not feature grossly unbalanced play and cannot be effectively classified through pure strength analysis; however, these results give all Trainers hope that player skill and learning how to deal with particular opponents is better than having an overpowered team.
\end{abstract}

\keywords{Classification, e-sports, outcome prediction}

\section{Introduction}
With the release of Pokemon X and Y in October 2013, competitive Pokemon suddenly experienced a surge in popularity. Today, there are entire websites and blogs dedicated to documenting competitive battles. These sites list basic information to acquaint novice Pokemon Trainers with the metagame, detailed information on every single Pokemon released to date, and much more.

As for the game itself, Pokemon is deceptively simple. Back when the first games came out, there were only around 150 Pokemon and constant base stats for each Pokemon at each level. Then, the creators introduced elements like Individual Values (IVs), Effort Values (EVs), and Natures, warping each Pokemon's natural ability based on a random number generator. In addition, they added new mechanics like Hold Items that activate in the middle of battles, moves and abilities that change based on the weather, transforming Pokemon, and, recently, a brand-new Fairy-type that did not exist before X and Y. With the addition of each new feature combined with the natural ingenuity of a professional gamer, it became increasingly more difficult to predict which Pokemon were "overpowered," which teams, moves, and abilities should be banned, and who would win in a battle. If it were at all possible to find these things out, it would be possible to predict, both now and in the future, which Pokemon and which teams will dominate the game.

\section{Related Work}
Currently, the most extensive databases on Pokemon are serebii.net and smogon.com. On serebii.net, one can find information on every single Pokemon game released to date, a detailed PokeDex that displays base stats, types, possible moves, and much more for each Pokemon. Meanwhile, smogon.com is the go-to standard for information on competitive Pokemon. They provide the standard tier classification for the entire set of Pokemon: Never Used (NU), Under Used (UU), Over Used (OU), and Uber. In addition, for each Pokemon, they give suggested movesets, hold items, natures, and usage summaries. Finally, we even looked in bulbapedia.bulbagarden.net for "hidden" aspects of the game like the damage equation for moves.
	
As our preliminary research shows, there has been some preliminary classification work and description based on intuition and human analysis; however, there is no tier list within each of the classifications, nor is there a list for the most powerful teams and moves. It should be possible to calculate such a ranking based on how many wins these Pokemon, teams, and moves achieve. To start off, it would suffice to first decide which teams actually win battles.

\section{Background Information}
In our research, we sought to find the most powerful teams in the OU meta; specifically, we wanted to decide which teams were the most powerful by classifying teams into "winners" and "losers," with "winners" being the cluster of the most powerful teams. We chose to work only in OU, since it is currently the most popular format. To gather data on Pokemon battles, we accessed battle records from Pokemon Showdown, an open-source online Pokemon battle and tournament tool. All battles were written in a scripting format that can be deciphered by looking at code examples from Pokemon Showdown, which can be found on Github.

In addition, we had access to both the built-in PokeDex information given by Pokemon Showdown and the move, ability, and hold item information found on serebii.net. The basic PokeDex includes the types and base stats\footnote{ In the PokeDex and in this report, we will refer to given constant stats as the "base" stats for a Pokemon or "base" power for a move and so on. If a stat is derived from an equation, it will simply be referred to as a "stat" or "power."} for a given Pokemon. Moves are what a Pokemon use in combat. They can be split into three categories: Physical, Special, and Other. A Physical move's effectiveness is calculated based on Attack and Defense, whereas a Special move's effectiveness is based on Special Attack and Special Defense. Other moves are generally used for support, such as healing, inflicting negative status conditions, and setting up "entry hazards" that damage a Pokemon being switched in. While the movepool for each Pokemon can be large, only a set of 4 of those moves may be taught to a Pokemon for use in battle. Abilities are what a Pokemon is capable of doing outside of its normal moves. Each Pokemon has one ability from a set of possible abilities, and these abilities may do anything from boost stats to inflict negative status conditions on an opponent and more. Each Pokemon is also allowed to hold an item, which aids the Pokemon in battle by doing things such as powering up specific moves, healing, and allowing the Pokemon to transform into its ultimate form, the Mega-Evolution.

On top of that information, we had access to basic information like a list of natures and what stats they affect and a table from which type advantages could be calculated. Natures provided a 0.9 times debuff to one stat and a 1.1 times buff to another. The type table gave a damage multiplier for moves\footnote{A move is "super effective" if it does more than 2.0 times damage and "not very effective" if it does 0.5 times damage.}. To do so, simply take an entry $(row, column)$, where the Attacking move's type is the row and the Defending Pokemon's type is the column. Up to two entries can be taken, and the type advantage is simply a singular entry the product of two entries. Having this data introduced absolute rules that had to be followed; for example, Water-types beat Fire-types.

\begin{table}

\centering

\caption{Partial Type-Advantage Matrix}

\begin{tabular}{|c|c|c|c|l|} \hline

  & Normal & Fire & Water & Electric \\ \hline

Normal & 1.0 & 1.0 & 1.0 & 1.0 \\ \hline

Fire & 1.0 & 0.5 & 0.5 & 1.0 \\ \hline

Water & 1.0 & 2.0 & 0.5 & 1.0 \\ \hline

Electric & 1.0 & 1.0 & 2.0 & 0.5 \\ \hline

\end{tabular}

\end{table}

Finally, we are given the equation for calculating how much damage any move does.

\begin{equation}D_1 = \frac{2 \times L + 10}{250} \times \frac{Atk}{Def} \times B + 2 \end{equation}
\begin{equation}M = STAB \times T \times C \times other \times r
\end{equation}
\begin{equation}D = D_1 \times M
\end{equation}

where $D_1$ is the damage calculated from Pokemon and move metrics, $M$ is the damage from modifiers, and $D$, the total damage dealt, is their product. Within each of these, $L$ is the Pokemon's level, $Atk$ is the attacking Pokemon's relevant Attack stat, $Def$ is the defending Pokemon's relevant Defense stat, $B$ is the move's base power, $STAB$ is Same-Type Attack Bonus\footnote{This value is 1.5 if the type of the move is the same as the type of the attacker.}, $T$ is the calculated type advantage, $C$ is a critical hit multiplier\footnote{This value is 2 if the move was a critical hit. The chance of this is random.}, $other$ is other damage multipliers\footnote{This is generally due to hold items.}, and $r\in[0.85, 1]$ is a random number. Using this information, we were able to calculate how much offensive and defensive power each Pokemon had when matched up against specific moves and Pokemon. Once again, this gives an absolute rule as to which Pokemon is stronger.

\section{Proposed Approach}
To handle this dataset, we believed that spectral clustering would be the best way to distinguish between winners and losers, since winners would be “further away” in terms of relative strength from the losers.

\subsection{Pokemon Stat Assumptions}
First of all, we had to make some assumptions about the team composition and how each Pokemon was trained. In the game, there are certain archetypes such as tank, support, offense, and revenge-killer. Each of these archetypes have distinctive features that are revealed through how Trainers decide to allocate EVs to their base stats, given that each Pokemon is limited to 510 and each move is limited to 252. For example, an offensive Pokemon will likely have maximum or near maximum possible EVs in either Attack or Special Attack. In addition, Trainers are likely to give max EVs to the highest base stat to make it better, and use a Pokemon with a Nature that amplifies the strongest stat while weakening the weakest stat. As for IVs and levels, the vast majority of Trainers are known to have perfect 31 IVs for each stat for each Pokemon and battle using Pokemon at maximum level 100. Finally, Trainers are likely to teach moves that make use of the strengths of any given Pokemon; for example, Physical moves would be taught to a Pokemon with high Attack. These basic assumptions were used as a safeguard to repair data for missing entries and are based off of very general rules that have been around since the creation of the game. All of these stat changes can be summarized in an equation found on Bulbapedia.

Hit Points
\begin{equation}\frac{(IV + 2 \times Base + EV/4 + 100) \times L}{100} + 10
\end{equation}

Other Stats
\begin{equation}(\frac{(IV + 2 \times Base + EV/4 + 100) \times L}{100} + 5) \times Nature
\end{equation}

\begin{table*}

\centering

\caption{Naive Bayes and SVM Data Table}

\begin{tabular}{|c|c|c|c|c|c|c|c|l|} \hline

Features & Pokemon 1 & Pokemon 2 & Pokemon 3 & Pokemon 4 & Pokemon 5 & Pokemon 6 & Entry Hazards & Weather \\ \hline

Instance 1 & $\vdots$ & $\vdots$ & $\vdots$ & $\vdots$ & $\vdots$ & $\vdots$ & $\vdots$ & $\vdots$ \\ \hline

$\vdots$ & $\vdots$ & $\vdots$ & $\vdots$ & $\vdots$ & $\vdots$ & $\vdots$ & $\vdots$ & $\vdots$ \\ \hline

\end{tabular}

\end{table*}

\begin{table*}

\centering

\caption{Info for Pokemon $i$ in the Data Table}

\begin{tabular}{|c|c|c|c|c|c|c|c|c|l|} \hline

Features & Base Stats & Move 1 & Move 2 & Move 3 & Move 4 & Hold Item & Buffs & Status & Debuffs \\ \hline

Instance 1 & $\vdots$ & $\vdots$ & $\vdots$ & $\vdots$ & $\vdots$ & $\vdots$ & $\vdots$ & $\vdots$ & $\vdots$ \\ \hline

$\vdots$ & $\vdots$ & $\vdots$ & $\vdots$ & $\vdots$ & $\vdots$ & $\vdots$ & $\vdots$ & $\vdots$ & $\vdots$ \\ \hline

\end{tabular}

\end{table*}

\subsection{Methods Used}
The methods used to analyze the data were spectral clustering, Naive Bayes, Support Vector Machines, and an ensemble of all three.

For the spectral clustering, we decided to use diversity and strength as distance measures, and we split the distance measure into three phases. In the first phase, we measured diversity by building distributions of the types found in a team. For the Pokemon and moves, this meant counting the number of Water-types, Fire-types, and so on and taking the squared distance between a list of the counts. Phase 2 included distances between individual Pokemon, such as the distance between their stats and various features of moves, such as power and accuracy. Finally, our third distance measure was derived from a score received in a mock battle. When performing spectral clustering by itself, we tried $k=[2, 8]$ to see if there were differences between winning and losing teams.

In addition to spectral clustering, we also tried to classify using Naive Bayes and a Support Vector Machine. Both classifiers classify data into one of two labels, 0 or 1, so this was appropriate for our data, where 0 represented “loss” and 1 represented “win.” For these two measures, we simply expanded out each team into a data table.


\end{document}